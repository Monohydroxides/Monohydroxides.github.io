<head>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
</head>

## 2.1 通信基础
### 2.1.1 通信基本概念
一个数据通信系统主要划分为信源，信道和信宿三部分，分别为数据的产生和发送方，数据的变换和传输方，数据的接收方。通信双方的信息交互方式分为单向通信，半双工通信，全双工通信，这在操作系统课程中有过类似的概念。

码元传输速率：单位时间内数字通信系统所传输的码元个数，码元速率与进制无关。
信息传输速率：单位时间内数字通信系统传输的二进制码元个数。

### 2.1.2 Nyquist Law 和 Shannon Law
Nyquist Law：理想低通信道中，极限码元传输速率为 $2W$ 波特，其中 $W$ 为理想低通信道的带宽。使用 $V$ 表示每个码元中离散电平的数目，那么极限数据率为 $$2W\log_2V$$
单位为 b/s。
Shannon Law：带宽受限且有高斯白噪声干扰的信道的极限数据传输速率为$$W\log_2(1 + \frac{S}{N})$$
单位为 b/s，其中 $W$ 为信道带宽，$S$ 为信道传输信号的平均功率，$N$ 为信道内部的高斯噪声功率，$\frac{S}{N}$ 为信噪比。

### 2.1.3 编码与调制
数字信号和模拟信号之间可以相互转换，组合出了四种编码方式。

（1）数字数据编码为数字信号
几种常见的数据编码：
归零编码：高电平 1，低电平 0，每个时钟周期均归零来达成同步。

非归零编码：高电平 1，低电平 0。

反向非归零编码：高电平 0，低电平 1。

曼彻斯特编码：一个码元分为两个相等的间隔，前高后低表示 1，前低后高表示 0。在每个码元中间出现电平跳变，既可作为时钟信号又可作为数据信号。但所占的频带宽度是原始基带宽度的两倍。
**以太网使用曼彻斯特编码**。

差分曼彻斯特编码：若码元为 1，则前半个码元的电平与上一个码元的后半个码元相同，若码元为 0，则前半个码元的电平与上一个码元的后半个码元相反。

（2）数字数据调制为模拟信号
主要通过幅移（ASK），频移（FSK），相移（PSK），正交振幅调制（QAM）实现。
正交振幅调制将 ASK 与 PSK 结合起来，在频率相同的前提下，设波特率为 $B$，采用 $m$ 个相位，每个相位有 $n$ 种振幅，通过 QAM 得到的数据传输速率 $R=B\log_2(nm)$，单位为 b/s。

（3）模拟数据编码为数字信号
主要包括采样，量化和编码三个步骤。Nyquist Law 已经介绍过，这里不再赘述。

（4）模拟数据调制为模拟信号
电话机和本地局交换机采用模拟信号传输模拟信号的编码方式，模拟的声音数据是加载到模拟的载波信号中传输的。

### 2.1.4 电路交换，报文交换，分组交换
（1）电路交换

电路交换技术分为三个阶段：连接建立，数据传输，连接释放。在数据传输的过程中，用户始终占用端到端的固定传输带宽。采用电路交换有时延低，传输有序，无冲突等优点，但同时存在建立连接的时间长，数据传输时线路独占导致的使用效率低等问题。
电路一旦建立，电路上的任何节点都采取“直通”方式接收和发送数据，不存在存储转发所花费的时间。

（2）报文交换

报文作为数据传输的单位携带目标地址，源地址等信息，在交换节点进行存储转发，具有无需建立连接，线路分配灵活，利用率高等特点，但由于报文大小没有限制，这对网络节点中的缓存空间提出了要求，且由于转发处理等存在时延，报文交换时延较高。
报文交换主要被使用在早期的电报通信网中，现代已经很少使用。

（3）分组交换

可以将分组交换理解为报文交换+数据块划分，把大的数据块划分为小的数据块，加上必要的控制信息构成分组进行传输。
具有无需建立连接，线路利用率高，存储管理简单等特点，但同样存在传输时延，且由于需要控制信息，提高了传输所需要的信息量，当分组交换采用数据报服务时，可能会出现失序，丢失或重复分组的问题。

### 2.1.5 数据报与虚电路
数据报方式和虚电路方式是分组交换的两种方式。

**数据报**

通信子网用户的端系统发送一个报文时，在端系统中实现的高层协议先把报文拆成若干带有序号的数据单元，并在网络层加上地址等控制信息后形成数据报分组（网络层的 PDU）。中间节点存储分组很短的一段时间，找到最佳的路由后，尽快转发每个分组。**不同的分组可以走不同的路径，也可以按不同的顺序到达目的节点**。

数据报服务具有如下特点：

（1）发送分组前不需要建立连接，发送方可随时发送，网络中的节点可随时接收分组。

（2）网络尽最大可能交付，传输不保证可靠性，可能丢失，每个分组独立地选择路由，转发的路径可能不同，因此分组不一定按序到达目的节点。

（3）每个分组中都包括发送端和接收端的完整地址以便独立传输。

（4）分组在交换节点存储转发时需要排队等待处理，这带来了一定的时延。

（5）网络路径是冗余的，因此对故障有一定的适应能力。

（6）转发双方不独占线路，资源利用率高。

**虚电路**

虚电路方式结合了数据报和电路交换方式。在分组发送前，要在发送方和接收方建立一条逻辑上相连的虚电路，这个连接一旦建立，就固定了虚电路对应的物理路径。虚电路也要经历虚电路建立，数据传输和虚电路释放三个步骤。

端系统每次建立虚电路时，选择一个未使用过的虚电路号分配给该虚电路，以区别本系统中的其他虚电路。在传送数据时，每个数据分组不仅要有分组号，校验和等控制信息，还要有它要通过的虚电路号，以区别其他虚电路上的分组。在虚电路网络中的每个节点都维护一张虚电路表，表中的每项记录了一个打开的虚电路的信息，包括在接收链路和发送链路上的虚电路号，前一节点和下一节点的标识。上述信息在虚电路的建立过程中确定，数据传输过程是双向的。

虚电路服务具有如下特点：

（1）虚电路的通信链路建立和拆除需要一定的时间开销；

（2）虚电路可以保证分组正确且有序的到达，还可以对两个数据端点的流量进行控制。

（3）分组首部不包含目的地址，而包含虚电路号，相比数据报而言开销较低。

（4）当网络中的某个节点或某条链路失效时，所有经过该节点或链路的虚电路都会被破坏。

## 2.2 传输介质
### 2.2.1 双绞线，同轴电缆，光纤，无线传输介质

**双绞线**
两根采用一定规则并排绞合的、相互绝缘的铜导线组成，即为非屏蔽双绞线（UTP），可以再加一层金属丝编织成的屏蔽层以增加抗电磁干扰的能力，即得到屏蔽双绞线（STP），是最常用的传输介质之一，通信距离为几千米到数十千米。

**同轴电缆**
分为 $50\Omega$（基带同轴电缆，主要用于传送基带数字信号）和 $75\Omega$（宽带同轴电缆，主要用于传送宽带信号）两种，具有良好的抗干扰特性，被用于传输较高速率的数据。

**光纤**
利用光导纤维进行通信，可见光频率为 $10^8$ MHz，因此光纤通信的带宽范围很大。
光纤通信主要分为单模和多模光纤，多模光纤主要利用了光的全反射特性，利用发光二极管制造光源，在传输过程中可能造成失真，因此只适合近距离传输；单模光纤的直径只有一个光的波长，利用半导体激光器制造光源，能较远距离传输，但制造成本较高。

光纤通信有损耗小，距离长，抗干扰强，保密性好等优点。

**无线传输介质**
无线传输介质有无线电波，微波，红外线，激光等。
无线电波穿透能力强，能够简化通信的连接是其最大的优点。
微波，红外线和激光统称为视线介质，有很强的方向性，都是直线传播。
卫星通信是通过地球同步卫星来中继发送微波信号，通信容量大，距离远，覆盖范围广，但保密性较差，端到端传播延时较长。

### 2.2.2 物理层接口的特性
1. 机械特性：接线器的形状，尺寸，引脚数，排列，固定等。
2. 电器特性：接口电缆的各条线上出现的电压范围。
3. 功能特性：某条线上出现的某一电平的电压的意义。
4. 过程特性：对于不同功能的各种可能事件的出现顺序。

## 2.3 物理层设备
### 2.3.1 中继器
中继器的主要功能为将**数字信号**整形放大后转发，以消除信号在传输过程中的失真和衰减，从而扩大网络传输的距离。中继器有两个端口，数据从一个端口输入，从另一个端口输出，使用中继器连接的几个网段仍然是一个局域网。
若中继器出现故障，则相邻两个网段的工作都会被影响。**中继器没有存储转发功能，不能连接两个速率不同的局域网**。

### 2.3.2 集线器
集线器实质上是一个多端口中继器，在网络中只起到信号的放大和转发的作用，目的是扩大网络的传输范围，而不具备信号的定向传送能力。集线器只能在半双工状态下工作，网络的吞吐速率会因此受到限制。当多台计算机同时工作时，每台计算机能分到的带宽会减少，使得集线器的工作效率降低。